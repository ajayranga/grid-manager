"use strict";(self.webpackChunkclient2=self.webpackChunkclient2||[]).push([[757],{6757:function(e,n,a){a.r(n),a.d(n,{default:function(){return q}});var t=a(1413),r=a(29439),s=a(72791),i=a(9827),c=a(60807),l=a(24390),o=a(50228),u=a(4565),d=a(16582),p=a(61091),g=a(13811),f=a(69963),x=a(56650),h=a(21680),m=a(19773),y=a(56700),Z=a(95506),b=a(1773),v=a(61963),j=a(90503),k=a(96382),N=a(22656),w=a(74165),A=a(7780),P=a(42249),z=a(96369),S=(0,w.Z)().mark((function e(n){var a,t,r,s;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,A.gw)(10),e.prev=1,a=n.payload.pageNum?n.payload.pageNum:1,t="/api/alert?pageNum=".concat(a),e.next=6,(0,A.Ys)(z.rK);case 6:if(""!==(r=e.sent)){e.next=12;break}return e.next=10,(0,A.gz)(I.failed("No Token found"));case 10:e.next=19;break;case 12:return e.next=14,(0,A.RE)(P.W,t,{method:"get",headers:{Authorization:"Bearer ".concat(r)}});case 14:return s=e.sent,e.next=17,(0,A.gz)(I.done(s));case 17:return e.next=19,(0,A.gz)(I.success());case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(1),e.next=26,(0,A.gz)(I.failed(e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message));case 26:case"end":return e.stop()}}),e,null,[[1,21]])})),C=(0,w.Z)().mark((function e(n){var a,t,r,s,i;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,A.gw)(10),e.prev=1,a=n.payload.id?n.payload.id:"",t=n.payload.pageNum?n.payload.pageNum:"",r="/api/alert/".concat(a,"?pageNum=").concat(t),e.next=7,(0,A.Ys)(z.rK);case 7:if(""!==(s=e.sent)){e.next=13;break}return e.next=11,(0,A.gz)(I.failed("No Token found"));case 11:e.next=20;break;case 13:return e.next=15,(0,A.RE)(P.W,r,{method:"delete",headers:{Authorization:"Bearer ".concat(s)}});case 15:return i=e.sent,e.next=18,(0,A.gz)(I.done(i));case 18:return e.next=20,(0,A.gz)(I.success());case 20:e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(1),e.next=27,(0,A.gz)(I.failed(e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message));case 27:case"end":return e.stop()}}),e,null,[[1,22]])})),E=(0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.Fm)(I.fetch.type,S);case 2:return e.next=4,(0,A.Fm)(I.delete.type,C);case 4:case"end":return e.stop()}}),e)})),T={allAlerts:[],pageNum:1,totalAlerts:0,loading:!1,error:"",success:!1},D=(0,k.oM)({name:"allAlerts",initialState:T,reducers:{fetch:function(e,n){e.loading=!0},done:function(e,n){e.allAlerts=n.payload.allAlerts,e.pageNum=n.payload.pageNum,e.totalAlerts=n.payload.totalAlerts,e.loading=!1},success:function(e,n){e.error="",e.loading=!1,e.success=!0},failed:function(e,n){e.error=n.payload,e.loading=!1},reset:function(e,n){e.error="",e.loading=!1,e.success=!1},delete:function(e,n){e.loading=!0}}}),I=D.actions,M=(D.reducer,a(59434)),B=a(46916),R=function(e){return e.allAlerts||T},W=(0,B.P1)([R],(function(e){return e.allAlerts})),F=(0,B.P1)([R],(function(e){return e.totalAlerts})),H=(0,B.P1)([R],(function(e){return e.loading})),K=((0,B.P1)([R],(function(e){return e.error})),(0,B.P1)([R],(function(e){return e.success})),a(70474)),Y=a(63738),U=a(33333),G=a(57689),O=a(11087),V=a(80184),X=[{id:"name",align:"center",disablePadding:!0,label:"Name"},{id:"priceSignal",align:"center",disablePadding:!1,label:"Price Signal"},{id:"criteria",align:"center",disablePadding:!1,label:"Criteria"},{id:"value",align:"center",disablePadding:!1,label:"Value"},{id:"email",align:"center",disablePadding:!1,label:"Email"},{id:"alertDays",align:"center",disablePadding:!1,label:"Active Days"},{id:"actions",align:"center",disablePadding:!1,label:"Actions"}];function _(){return(0,V.jsx)(i.Z,{children:(0,V.jsx)(c.Z,{children:X.map((function(e){return(0,V.jsx)(l.Z,{align:e.align,padding:e.disablePadding?"none":"normal",sx:{py:2},children:e.label},e.id)}))})})}function q(){var e=((0,N.vp)({key:D.name,reducer:D.reducer}),(0,N.hb)({key:D.name,saga:E}),{actions:D.actions}).actions,n=(0,G.TH)();(0,U.iy)();var a=(0,M.I0)(),i=(0,s.useState)("asc"),k=(0,r.Z)(i,1)[0],w=(0,s.useState)("trackingNo"),A=(0,r.Z)(w,1)[0],P=(0,s.useState)(1),z=(0,r.Z)(P,2),S=z[0],C=z[1],T=(0,M.v9)(W),I=(0,M.v9)(H),B=(0,M.v9)(F),R=(0,M.v9)(K.NH);return(0,s.useEffect)((function(){a(e.fetch({pageNum:1}))}),[R]),(0,s.useEffect)((function(){var t=parseInt(n.search.split("=")[1]);a(e.fetch({pageNum:t})),C(t)}),[n.search]),(0,V.jsx)(o.Z,{sx:{padding:"0 1rem"},children:I?(0,V.jsx)(Y.Z,{}):T&&0===T.length?(0,V.jsx)(u.Z,{variant:"h2",component:"h2",sx:{my:7},children:"No Alerts Saved"}):(0,V.jsxs)(o.Z,{children:[(0,V.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 0"},children:[(0,V.jsxs)(d.Z,{children:[(0,V.jsx)(p.Z,{variant:"contained",sx:{marginRight:"1rem"},children:"Alerts"}),(0,V.jsx)(p.Z,{variant:"outlined",children:"Triggered Alerts"})]}),(0,V.jsx)(g.Z,{onClick:function(){return a(e.fetch({pageNum:1}))},children:(0,V.jsx)(v.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},component:x.Z,children:[(0,V.jsxs)(h.Z,{"aria-labelledby":"tableTitle",size:"small",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-child":{pr:3}},children:[(0,V.jsx)(_,{order:k,orderBy:A}),(0,V.jsx)(m.Z,{children:T.map((function(n,t){return(0,V.jsx)(c.Z,{hover:!0,sx:{"&:last-child td, &:last-child th":{border:0}},tabIndex:-1,children:Object.entries(n).map((function(t){return"name"===t[0]||"priceSignal"===t[0]||"criteria"===t[0]||"value"===t[0]||"email"===t[0]||"alertDays"===t[0]?(0,V.jsx)(l.Z,{align:"center",sx:{py:0},children:t[1]},t[0]):"phone"===t[0]?(0,V.jsxs)(l.Z,{align:"center",sx:{py:0},children:[(0,V.jsx)(g.Z,{children:(0,V.jsx)(b.Z,{})}),(0,V.jsx)(g.Z,{onClick:function(){return a(e.delete({id:n._id,pageNum:S}))},children:(0,V.jsx)(j.Z,{})})]},t[0]):(0,V.jsx)(l.Z,{sx:{display:"none"}},t[0])}))},t)}))})]}),(0,V.jsx)(o.Z,{sx:{margin:"10px"},children:(0,V.jsx)(y.Z,{count:Math.ceil(B/10),variant:"outlined",shape:"rounded",sx:{display:"flex",justifyContent:"end"},renderItem:function(e){return(0,V.jsx)(Z.Z,(0,t.Z)({component:O.rU,to:1===e.page?"":"?page=".concat(e.page)},e))}})})]})]})})}},33333:function(e,n,a){a.d(n,{iy:function(){return f},G6:function(){return g},E3:function(){return d}});var t=a(96382),r=a(22656),s=a(74165),i=a(7780),c=a(42249),l=a(96369),o=(0,s.Z)().mark((function e(n){var a,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.gw)(10),e.prev=1,a="/api/alert",e.next=5,(0,i.Ys)(l.rK);case 5:if(""!==(t=e.sent)){e.next=11;break}return e.next=9,(0,i.gz)(g.failed("No Token found"));case 9:e.next=15;break;case 11:return e.next=13,(0,i.RE)(c.W,a,{method:"post",headers:{Authorization:"Bearer ".concat(t)},data:{name:n.payload.name,phone:n.payload.phone,email:n.payload.email,criteria:n.payload.criteria,value:n.payload.value,alertDays:n.payload.alertDays,priceSignal:n.payload.priceSignal}});case 13:return e.next=15,(0,i.gz)(g.success());case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(1),e.next=22,(0,i.gz)(g.failed(e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message));case 22:case"end":return e.stop()}}),e,null,[[1,17]])})),u=(0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Fm)(g.start.type,o);case 2:case"end":return e.stop()}}),e)})),d={loading:!1,error:"",success:!1},p=(0,t.oM)({name:"createAlert",initialState:d,reducers:{start:function(e,n){e.loading=!0},success:function(e,n){e.error="",e.loading=!1,e.success=!0},failed:function(e,n){e.error=n.payload,e.loading=!1},reset:function(e,n){e.error="",e.loading=!1,e.success=!1}}}),g=p.actions,f=(p.reducer,function(){return(0,r.vp)({key:p.name,reducer:p.reducer}),(0,r.hb)({key:p.name,saga:u}),{actions:p.actions}})},70474:function(e,n,a){a.d(n,{NH:function(){return i},mU:function(){return l},zh:function(){return c}});var t=a(46916),r=a(33333),s=function(e){return e.createAlert||r.E3},i=(0,t.P1)([s],(function(e){return e.loading})),c=(0,t.P1)([s],(function(e){return e.error})),l=(0,t.P1)([s],(function(e){return e.success}))}}]);
//# sourceMappingURL=757.ce3a377f.chunk.js.map